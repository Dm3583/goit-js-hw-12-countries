{"version":3,"sources":["webpack:///./js/refs.js","webpack:///./js/fetchCountries.js","webpack:///./templates/countryInf.hbs","webpack:///./templates/countriesList.hbs"],"names":["input","document","querySelector","root","getElementById","console","log","countriesListTpl","debouncedSearch","require","debounce","e","query","target","value","fetch","then","status","response","json","data","length","PNotify","error","text","delay","shadow","country","map","el","name","countriesListMarkup","refs","insertAdjacentHTML","countryTpl","catch","ok","res","Promise","reject","message","addEventListener","Handlebars","module","exports","template","container","depth0","helpers","partials","helper","alias1","nullContext","alias2","hooks","helperMissing","alias3","alias4","escapeExpression","lookupProperty","parent","propertyName","Object","prototype","hasOwnProperty","call","lambda","stack1","program","noop"],"mappings":"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","file":"main.42f3b67f3614dde6e88c.js","sourcesContent":["export default {\r\n    input: document.querySelector('input[data-query=\"query\"]'),\r\n    root: document.getElementById('result'),\r\n}","import PNotify from 'pnotify/dist/es/PNotify.js';\r\nimport PNotifyButtons from 'pnotify/dist/es/PNotifyButtons.js';\r\nimport refs from './refs';\r\nimport countriesListTpl from '../templates/countriesList.hbs';\r\nimport countryTpl from '../templates/countryInf.hbs';\r\n\r\n\r\n\r\n// console.log(refs);\r\nconsole.log(countriesListTpl);\r\nconst debounce = require('lodash.debounce');\r\n\r\nconst debouncedSearch = debounce(searchForQuery, 1000)\r\n\r\nfunction searchForQuery(e) {\r\n    let query = e.target.value;\r\n    if (query != '') {\r\n        fetchCountries(query);\r\n    };\r\n};\r\n\r\n\r\nrefs.input.addEventListener('input', debouncedSearch);\r\n\r\n\r\nfunction fetchCountries(searchQuery) {\r\n    return fetch(`https://restcountries.eu/rest/v2/name/${searchQuery}`)\r\n        .then(status)\r\n        .then(response => response.json())\r\n        .then(data => {\r\n            if (data.length > 10) {\r\n                return PNotify.error({\r\n                    text: \"Too many matches found. Please enter a more specific query!\",\r\n                    delay: 4000,\r\n                    shadow: true\r\n                });\r\n            }\r\n            if (data.length >= 2) {\r\n                console.log(data);\r\n                const country = data.map(el => el.name)\r\n                const countriesListMarkup = countriesListTpl(country);\r\n                console.log(countriesListMarkup);\r\n                refs.root.insertAdjacentHTML('afterbegin', countriesListMarkup)\r\n            }\r\n            const country = countryTpl(data[0])\r\n            console.log(data);\r\n\r\n            refs.root.insertAdjacentHTML('afterbegin', country)\r\n        })\r\n\r\n        .catch(e => {\r\n            console.log(\"CATCH\", e);\r\n            PNotify.error({\r\n                text: e,\r\n                delay: 4000,\r\n                shadow: true\r\n            });\r\n            return e;\r\n        });\r\n\r\n};\r\n\r\nfunction status(response) {\r\n    if (response.ok) {\r\n        return response;\r\n    }\r\n    return response.json().then(res => Promise.reject(res.message));\r\n}\r\n// refs.input.removeEventListener('input', searchForQuery);\r\n// console.log(debounce);\r\n\r\n// fetchCountries('switz')","var Handlebars = require(\"../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=\"function\", alias4=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<div>\\r\\n    <p>\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"name\") || (depth0 != null ? lookupProperty(depth0,\"name\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"name\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":2,\"column\":7},\"end\":{\"line\":2,\"column\":15}}}) : helper)))\n    + \"</p>\\r\\n    <p>\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"region\") || (depth0 != null ? lookupProperty(depth0,\"region\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"region\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":3,\"column\":7},\"end\":{\"line\":3,\"column\":17}}}) : helper)))\n    + \"</p>\\r\\n    <img src=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"flag\") || (depth0 != null ? lookupProperty(depth0,\"flag\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"flag\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":4,\"column\":14},\"end\":{\"line\":4,\"column\":22}}}) : helper)))\n    + \"\\\" alt=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"name\") || (depth0 != null ? lookupProperty(depth0,\"name\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"name\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":4,\"column\":29},\"end\":{\"line\":4,\"column\":37}}}) : helper)))\n    + \"\\\">\\r\\n    <p>\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"population\") || (depth0 != null ? lookupProperty(depth0,\"population\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"population\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":5,\"column\":7},\"end\":{\"line\":5,\"column\":21}}}) : helper)))\n    + \"</p>\\r\\n</div>\";\n},\"useData\":true});","var Handlebars = require(\"../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data) {\n    return \"    <li>\"\n    + container.escapeExpression(container.lambda(depth0, depth0))\n    + \"</li>\\r\\n\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<ul>\\r\\n\"\n    + ((stack1 = lookupProperty(helpers,\"each\").call(depth0 != null ? depth0 : (container.nullContext || {}),depth0,{\"name\":\"each\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":2,\"column\":4},\"end\":{\"line\":4,\"column\":13}}})) != null ? stack1 : \"\")\n    + \"</ul>\";\n},\"useData\":true});"],"sourceRoot":""}